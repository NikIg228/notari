# Нотариальные документы

Система создания нотариальных документов на основе Next.js 14 с App Router.

## Технологии

- Next.js 14 (App Router)
- TypeScript
- TailwindCSS
- shadcn/ui
- Framer Motion
- React Hook Form + Zod
- TanStack Query

## Структура проекта

```
/app
  /wizard/[id] - страница создания документа через wizard
  /documents - список всех документов
  /data - API routes для данных
/components
  /ui - базовые UI компоненты (shadcn/ui)
  /wizard - компоненты wizard engine
  /forms - компоненты форм
  /preview - компоненты предпросмотра
/lib
  /hooks - React хуки
  /utils - утилиты
  /validators - схемы валидации Zod
  /constants - константы (категории, страны, регионы)
  /parsers - парсеры для обработки данных
/data
  documents.json - список всех 43 документов
  wizard-schemas/ - JSON схемы для wizard
/schemas - TypeScript схемы и типы
```

## Установка и запуск

```bash
# Установка зависимостей
npm install

# Генерация documents.json из docs.txt
npm run generate-docs

# Запуск dev сервера
npm run dev
```

Откройте [http://localhost:3000](http://localhost:3000) в браузере.

## Функционал

### Главная страница (/)
- Список всех 43 документов
- Фильтрация по категориям (Авто, Недвижимость, Суд, Дети, Банк, Наследство, Прочее)
- Поиск по названию
- Адаптивная сетка документов (3-5 колонок)

### Wizard Engine (/wizard/[id])
- Пошаговое создание документа
- Навигация между шагами (Назад/Далее)
- Прогресс-бар
- Анимации переходов (Framer Motion)
- Валидация полей (Zod)
- Автосохранение состояния в localStorage
- Восстановление черновика

### Типы полей
- text - текстовое поле
- number - числовое поле
- date - поле даты (формат ДД.ММ.ГГГГ)
- select - выпадающий список
- radio - группа радиокнопок
- checkbox - группа чекбоксов
- iin - поле ИИН с валидацией
- phone - поле телефона
- file - загрузка файла
- array - повторяющиеся группы (1-10 детей, 1-2 доверителей и т.д.)

### Предпросмотр (/wizard/[id]/preview)
- Отображение всех введённых данных
- Экспорт в JSON
- Возможность вернуться к редактированию

### Страница документов (/documents)
- Таблица всех документов
- Фильтр по категориям
- Статус готовности схемы
- Детальная страница документа с flowchart

## Примеры схем

Созданы примеры JSON схем для документов:
- Документ 1: "Сопровождение ребенка вне РК"
- Документ 2: "Сопровождение несовершеннолетнего ребенка по РК"

## Валидация

Все поля валидируются с помощью Zod:
- ИИН: 12 цифр
- Дата: формат ДД.ММ.ГГГГ
- Телефон: казахстанский формат
- Обязательные поля
- Диапазоны (1-10 детей, 1-31 день и т.д.)

## Сохранение состояния

Состояние wizard автоматически сохраняется в localStorage:
- documentId
- currentStep
- progress
- formData

При возврате на страницу wizard предлагается восстановить черновик.

